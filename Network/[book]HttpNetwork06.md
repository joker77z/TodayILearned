# 6장 : HTTP 헤더

> 헤더 필드에 대해 자세하게 알아보자.

## HTTP 메시지 헤더

Http 메시지는 두 가지로 이루어져 있다. **메시지 헤더**와 **메시지 바디.** 메시지 헤더는 서버 처리에 필요한 주요 정보가 들어가 있다. 메시지 바디에는 필요로 하는 리소스가 들어가있다.

Http 헤더 필드는 **헤더 필드 명 : 필드 값**으로 구분한다. 하나의 헤더 필드는 여러 필드 값을 가질 수 있다.

> **HTTP 헤더 필드가 중복된 경우는 어떻게 될까?**
> 브라우저마다 다르게 동작한다. 먼저 있는 헤더 필드를 우선으로 처리하는 브라우저도 있고 가장 마지막으로 처리하는 브라우저도 있다.   
> 🧑🏼‍💻 일반적으로 이런 경우는 없기 때문에 동일한 경우가 있다면 찾아보자.

<br />

## 4종류의 HTTP 헤더 필드

- 일반적 헤더 필드
  리퀘스트 메시지, 리스폰스 메시지 둘 다 사용할 수 있는 헤더다.
- 리퀘스트 헤더 필드
  리퀘스트 부가적 정보, 클라이언트 정보, 리스폰스 콘텐츠 우선순위 등을 지정할 수 있다.
- 리스폰스 헤더 필드
  리스폰스의 정보와 서버의 정보, 클라이언트의 추가 정보 등을 부가한다.
- 엔티티 헤더 필드
  리퀘스트 메시지, 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더. 콘텐츠 갱신 시간 등 엔티티에 관한 정보를 부가한다. 

<br />

## HTTP/1.1 헤더 필드

### 일반 헤더 필드

| 헤더 필드명       | 설명                              |
| ----------------- | --------------------------------- |
| Cache-Control     | 캐싱 동작 지정                    |
| Connection        | Hop-by-hop 헤더, 커넥션 관리      |
| Date              | 메시지 생성 날짜                  |
| Pragma            | 메시지 제어                       |
| Trailer           | 메시지 끝에 추가                  |
| Transfer-Encoding | 메시지 바디의 전송 코딩 형식 지정 |
| Upgrade           | 다른 프로토콜에 업그레이드        |
| Via               | 프록시 서버에 관한 정보           |
| Warning           | 에러 통지                         |



<br />

### 요청(Request) 헤더 필드

| 헤더 필드           | 설명                                                         |
| ------------------- | ------------------------------------------------------------ |
| Accept              | 클라이언트가 이해할 수 있는 MIME 타입                        |
| Accept-Charset      | 클라이언트가 지원하는 문자 인코딩을 알리는데 쓰였으나, 지금은 널리 사용되지 않는다. |
| Accept-Encoding     | 클라이언트가 이해할 수 있는 콘텐츠 인코딩                    |
| Accept-Language     | 어떤 언어를 이해할 수 있고 어떤 것을 더 우선순위 높게 선호하는지를 알려준다. |
| Authorization       | 웹 인증을 위한 정보                                          |
| Expect              | 요청을 적절하게 처리하기 위해 서버가 반환할 기대값           |
| From                | 요청한 사용자 에이전트를 제어할 때 사용자 이메일을 포함해야 한다. |
| Host                | 요구하는 리소스 주소                                         |
| If-Match            | 요청을 조건부로 만든다. 일치한 태그 리소스를 반환한다.       |
| If-Modified-Since   | 지정한 날짜 이후에 변경한 경우에만 리소스를 반환한다.        |
| If-None-Match       | If-Match와 반대다. 일치하지 않는 리소스를 반환한다.          |
| If-Range            | 일부분을 요청한다. 충족되면 상태 206을, 충족되지 않으면 200으로 다시 시도한다. |
| If-Unmodified-Since | If-Modified-Since와 반대다. 지정된 날짜 이후에 수정되지 않았어야 리소스를 반환한다. |
| Max-Forwards        | 최대 전송 Hop 수.                                            |
| Proxy-Authorization | 프록시 서버의 클라이언트 인증을 위한 정보                    |
| Range               | 범위 요청.                                                   |
| Referer             | 리소스를 요청한 URI 주소다. 분석, 로깅, 최적화된 캐싱 등에 사용된다. |
| TE                  | Transfer Encoding으로 얘는 Hop-by-Hop이다. 청크로 쪼개서 여러번 보낼 수 있다. |
| User-Agent          | 서버 및 네트워크가 응용 프로그램, 운영 체제, 벤더 및 버전을 인식할 수 있다. |

> **Hop이란?**
네트워크에서 출발지와 목적지 사이에 위치한 경로의 한 부분이다. (참조 : 홉 - 위키백과)

> **TE에 대한 부가 설명**
> TE는 Hop-By-Hop이기 때문에 예를 들어 gzip일 경우 프록시에서 풀려서 올 수도 있고 안풀려서 올 수도 있기 때문에 압축을 풀어야 하는지, 어떻게 풀것인지도 정해줘야 한다.
> (참조: https://blog.weirdx.io/post/4430, MDN)

<br />

### 응답(Response) 헤더 필드

| 헤더 필드명        | 설명                                                         |
| ------------------ | ------------------------------------------------------------ |
| Accept-Ranges      | 바이트 단위 요청을 수신할 수 있는지 여부                     |
| Age                | 프록시 캐시에 있던 시간. 일반적으로 0에 가깝다. 0이면 origin에서 가져온 것일 수 있다. 보통 현재 시간과 http응답에 있는 date와의 차이다. |
| Etag               | 리소스의 특정 버전. 캐시 효율성을 높이고 대역폭을 절약할 수 있다. 내용이 변경되지 않으면 서버는 전체응답을 다시 보낼필요가 없다. |
| Location           | redirect를 할 경우 응답헤더에 포함한다. 클라이언트를 리다이렉트 시킨다. |
| Proxy-Authenticate | 프록시 서버에서 인증 방법을 클라이언트에게 전달한다.         |
| Retry-After        | 재요청 시간. 다시 재요청하기 전에 기다려야 한다.             |
| Server             | Server에서 사용중인 소프트웨어다. 지나치게 상세한 값은 공격을 유발할 수 있다. |
| Vary               | 캐시를 컨트롤하기 위해 사용된다. 오리진 서버가 프록시 서버에 로컬 캐시를 사용하는 방법에 대한 지시를 전달한다. |
| WWW-Authenticate   | 특정 리소스에 대해 엑세스 권한을 얻는데 사용할 수 있는 http 인증 방법을 정의한다. |

<br />

### 엔티티 헤더 필드

| 헤더 필드 명     | 설명                                                         |
| ---------------- | ------------------------------------------------------------ |
| Allow            | 리소스가 허용하는 HTTP 메소드 리스트                         |
| Content-Encoding | 엔티티 바디에 적용되는 콘텐츠 인코딩                         |
| Content-Language | 의도된 언어를 표현. 정의가 되어 있지 않다면 특정 언어가 아닌 모든 사용자에 대해 제공하는 것이다. |
| Content-Length   | 엔티티 바디 사이즈다. byte(8bit)가 사용된다.                 |
| Content-Location | 반환된 데이터 위치다. 주 용도는 리소스 URI를 표현한다.       |
| Content-Range    | 엔티티 바디 범위                                             |
| Content-Type     | 엔티티 바디 미디어 타입                                      |
| Expires          | 엔티티 바디 유효기간 날짜                                    |
| Last-Modified    | 리소스 최종 갱신 날짜                                        |



## 쿠키를 위한 헤더 필드

