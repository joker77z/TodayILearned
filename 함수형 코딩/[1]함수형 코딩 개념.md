> **쏙쏙 들어오는 함수형 코딩**책을 읽고 정리했습니다.
> 이 책을 보고 싶었던 이유는 원론적인 이야기들만 다루는 대다수의 함수형 프로그래밍책과 다르게 사실적인 개념과 실용적인 예제 및 아키텍처를 예시로 설명된다는 점 때문이었다.

# Chapter1

> Chapter1에서는 함수형 사고가 무엇인지, 왜 개발자에게 도움이 되는지 알아본다.

<br />

## 함수형 프로그래밍은 무엇인가?

위키디피아에 따르면 아래와 같이 정의가 내려진다.
**"부수 효과 없이 순수 함수만 사용하는 프로그래밍 스타일"**

- **부수 효과**는 함수가 <u>리턴값 이외에 하는 모든 일</u>을 말한다.
- **순수 함수**는 인자에만 의존하여 같은 인자를 넣으면 항상 같은 결과를 돌려준다. 부수 효과가 없는 함수다.

> 정의에 따르면 함수형 프로그래머는 항상 부수 효과를 피하고 순수 함수만 사용해야 할 것 같지만, 실제 함수형 프로그래머는 부수 효과와 순수하지 않은 함수를 사용한다.

<br />

## 실용적인 측면에서 본 함수형 프로그래밍 정의의 문제점

학문적으로는 함수형 프로그래밍 정의가 가치있을 수 있지만, 실제 프로그래밍을 하는 개발자에게는 큰 도움이 되지 않는다. 실용적인 측면에서 문제 3가지를 들 수 있다.

### 문제 1 : 부수 효과는 필요하다.

정의에 따르면 부수 효과를 피해야 하지만 **부수 효과는 소프트웨어를 실행하는 이유다.** 예를 들어, 이메일을 전송하는 소프트웨어일 때 전송하지 못한다면 무슨 의미가 있을까. 필요할 때는 써야 한다.

### 문제 2 : 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있다.

순수 함수만 쓰라고 되어있지만, 순수하지 않은 함수도 사용한다. 그리고, 순수하지 않은 함수를 잘 다룰 수 있는 기술이 많이 있다.

### 문제 3 : 함수형 프로그래밍은 실용적이다.

정의에 따르면 함수형 프로그래밍이 수학적이라 개발에서 사용되지 않는 것처럼 느껴지지만, 실제로 함수형 프로그래밍으로 잘 만들어진 소프트웨어들이 많다. 그래서 정의 자체는 사용자들에게 혼란을 준다.

<br />

## 함수형 프로그래밍을 학문적인 지식이 아닌 기술 및 개념으로 보기

함수형 프로그래밍은 서로 다른 의미로 생각한다. 학술적, 실용적으로도 많은 내용이 있다. 함수형 프로그래밍의 중요한 개념은 객체 지향 프로그래밍이나 절차적 프로그래밍을 가리지 않고 모든 프로그래밍 언어에서 쓸 수 있다는 것이다. 어디에서나 적용할 수 있다.

<br />

## 액션, 계산, 데이터로 구분하기

함수형 프로그래머는 직감적으로 코드를 세 가지로 나눈다.

- 액션
- 계산
- 데이터

### 액션

아래 세 가지 액션은 언제, 얼만큼 호출했는지가 중요하기 때문에 호출할 때 신중해야 한다. 이메일을 보낸다고 가정하면 중복으로 보내거나 전송이 안되는 것을 바라지는 않을 것이다.

- sendEmail(to, from, subject, body)
- saveUserDB(user)
- getCurrentTime()

### 계산

계산과 데이터의 차이는 **실행 여부**다. 계산은 실행 가능하다.

- sum(numbers)
- string_length(str)

### 데이터

데이터는 눈에 보이는 그대로며 정적이다.

- [1, 10, 2, 45]

- ```js
  {
    "firstname": "Eric",
  	"lastname": "Normard"
  }
  ```

<br />

## 액션, 계산, 데이터 구분해보기

시나리오를 예를 들어서 각 동작을 구분해보자.

### 1. 사용자가 [완료]버튼을 누른다.

UI이벤트다. 실행 횟수에 의존하기 때문에 **액션**이다.

### 2. 클라이언트가 서버로 메세지를 보낸다.

메시지를 보내는 것도 횟수에 의존하기 떄문에 **액션**이다. 메시지 자체는 데이터다.

### 3. 서버가 메시지를 받는다.

메시지를 받는 것은 횟수에 의존하기 때문에 **액션**이다.

### 4. 서버가 DB를 변경한다.

내부 상태를 변경하기 때문에 **액션**이다.

### 5. 누구에게 알람을 보낼지 결정한다.

결정하는 것은 **계산**이다. 입력값이 같다면 결과가 항상 같다.

> 액션은 언제, 얼만큼 호출하는지가 중요하다. 누구에게 알람을 보낼지 결정하는 행위는 얼만큼 반복되어도 결과에 변화가 없다.

### 6. 서버가 이메일로 알람을 보낸다.

이메일 보내기는 **액션**이다.

<br />

## 액션, 계산, 데이터를 구분하면 오는 장점은?

### 함수형 프로그래밍은 분산 시스템에 잘 어울린다.

함수형 프로그래밍은 최근 네트워크 통신을 하는 복잡한 소프트웨어가 확산되면서 다시 각광받게 되었다.

여러 컴퓨터가 네트워크 통신을 하다보면 순서가 섞이거나 중복되거나 유실되기도 한다. 시간에 따라 바뀌는 값을 모델링하는 것은 중요하지만 어렵다. **실행 시점, 횟수에 의존하는 코드를 없애면 코드를 더 잘 이해하고 버그를 막을 수 있다.**

액션은 실행 시점, 횟수에 의존하기 때문에 문제가 되지만 코드 전체에 영향을 주지 않도록 격리시킨다. 그리고 많은 부분을 액션에서 계산으로 바꾸다보면 액션을 다루기가 쉬워진다.

<br />

## 1장에서 알아둬야 하는 중요한 함수형 사고는?

함수형 프로그래밍에서 중요하다고 생각하는 개념 두 가지를 정리하면 다음과 같다. 

- 액션, 계산, 데이터 구분하기

  구분하고, 액션을 계산으로 리팩터링하고 왜 유지보수와 테스트, 재사용성에 좋은지를 뒤에서 알아보자.

- 일급 추상

  함수에 함수를 넘겨서 더 많은 함수를 재사용한다. 설계 관점에서 반응형 아키텍처, 어니언 아키텍처를 일급 추상과 연결해서 알아보자.



### 이 책의 기본 규칙

- 특정 언어에 의존하지 않는다. 언어 뿐만 아니라 객체지향 코드에서도 사용할 수 있다.
- 실용적이라 바로 쓸 수 있어야 한다.
- 우리가 지금 가지고 있는 코드와 무관하게 바로 쓸 수 있어야 한다. 즉, 처음부터 다시 함수형으로 설계하는 것이 아니라 기존 코드에 적용할 수 있어야 한다.
